<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center">Ayuda con la contraseña</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">

  <form [formGroup]="form">
          <!--Enviar codigo-->
    <ion-input #rut label="RUT" formControlName="rut" labelPlacement="floating" fill="outline" placeholder="Ingresa tú rut" [maskito]="rutMask"
    [maskitoElement]="maskRut"></ion-input>
    <div class="error">
      <p *ngIf="form.get('rut')?.hasError('minlength')">
        RUT inválido
      </p>
      <p *ngIf="form.get('rut')?.hasError('required') && form.get('rut')?.touched">
        Por favor, ingresa tú RUT.
      </p>
    </div>
    <ion-item lines="none">
      <p class="mensaje">
        <ion-icon name="mail-outline"></ion-icon>
        Te enviaremos un código de verificación a tu correo</p>
    </ion-item>
  </form>

  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="auto">
        <div>
          <ion-button (click)="enviarCodigo(rut)" shape="round" [disabled]="isSent || !form.valid"  [style.visibility]="isHidden" fill="outline">Enviar</ion-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

    
  <!--Si el codigo es valido, campos para contraseña-->
  <div *ngIf="isCodigo" class="ion-margin-top">
      <form [formGroup]="formContra">
        <!--Contraseña nueva-->
        <ion-input #contraNueva
            label="Contraseña nueva" minlength="6" maxlength="50"
            labelPlacement="floating" formControlName="contraNueva" fill="outline" type="password"></ion-input>
        <div class="error">
          <p *ngIf="formContra.get('contraNueva')?.hasError('minlength')">
            Ingresa al menos 6 carácteres
          </p>
          <div *ngIf="formContra.get('contraNueva')?.hasError('pattern')">
            <p>Ingresa al menos una mayuscula</p>
            <p>Ingresa al menos un digito</p>
            <p>No debe contener espacios en blanco</p>
          </div>
          <p *ngIf="formContra.get('contraNueva')?.hasError('required') && formContra.get('contraNueva')?.touched">
            El campo debe estar completo
          </p>
          <p *ngIf="formContra.get('contraNueva')?.hasError('maxlength')">
            Máximo 12 cáracteres
          </p>
        </div>
      </form>
  </div>


</ion-content>
  <!--Footer-->
  <ion-footer class="ion-padding ion-no-border">
    <ion-grid class="ion-padding">
      <ion-row class="ion-justify-content-center">
        <ion-col size="auto">
          <ion-button (click)="setContra()" [style.visibility]="botonHidden" shape="round" fill="outline">Confirmar</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-footer>

